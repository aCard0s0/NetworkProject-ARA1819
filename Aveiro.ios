conf t

ip name-server 10.5.100.100
ip domain lookup

interface Loopback0
    ip address 192.168.1.3 255.255.255.0
    ip ospf 1 area 0
    no shutdown

! Porto connection
interface FastEthernet0/0
    ip address 10.0.10.2 255.255.255.0
    ip ospf 1 area 0
    no shutdown

! EmpA1 connection
interface FastEthernet0/1
    ip address 10.1.30.1 255.255.0.0
    ip ospf 1 area 0
    no shutdown

! EmpB1 connection
interface FastEthernet1/0
    ip address 10.2.30.1 255.255.0.0
    ip ospf 1 area 0
    no shutdown

! DataCenterAveiro connection
interface FastEthernet1/1
    ip address 10.3.30.1 255.255.0.0
    ip ospf 1 area 0
    no shutdown

router ospf 1
    mpls traffic-eng router-id Loopback0
    mpls traffic-eng area 0
    redistribute static subnets
    !network 10.0.0.0 0.255.255.255 area 0

router bgp 1000
    bgp router-id 192.168.1.3
    ! Porto
    neighbor 192.100.1.1 remote-as 1000
    neighbor 192.100.1.1 update-source Loopback0
    ! Lisboa2
    neighbor 192.100.1.2 remote-as 1000
    neighbor 192.100.1.2 update-source Loopback0
    ! Oeiras
    neighbor 192.100.1.4 remote-as 1000
    neighbor 192.100.1.4 update-source Loopback0

address-family ipv4
    network 192.172.100.0 mask 255.255.255.128
    neighbor 10.1.100.10 activate
    neighbor 192.100.1.1 activate
    neighbor 192.100.1.1 next-hop-self
    neighbor 192.100.1.2 activate
    neighbor 192.100.1.2 next-hop-self
    neighbor 192.100.1.3 activate
    neighbor 192.100.1.3 next-hop-self
    exit-address-family

end